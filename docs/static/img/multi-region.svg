<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 550">
  <defs>
    <linearGradient id="saPopGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#10B981;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#059669;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="usPopGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3B82F6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1D4ED8;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="euPopGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#8B5CF6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#7C3AED;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="wgMeshGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#F97316;stop-opacity:0.2" />
      <stop offset="100%" style="stop-color:#EA580C;stop-opacity:0.1" />
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="4" stdDeviation="6" flood-opacity="0.15"/>
    </filter>
    <filter id="glow">
      <feDropShadow dx="0" dy="0" stdDeviation="3" flood-color="#F97316" flood-opacity="0.5"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="900" height="550" fill="#0f172a" rx="12"/>

  <!-- Title -->
  <text x="450" y="35" text-anchor="middle" fill="white" font-family="system-ui" font-size="20" font-weight="600">Multi-Region Deployment Architecture</text>

  <!-- WireGuard Mesh Background -->
  <ellipse cx="450" cy="280" rx="380" ry="180" fill="url(#wgMeshGrad)" stroke="#F97316" stroke-width="1" stroke-dasharray="8,4" filter="url(#glow)"/>
  <text x="450" y="475" text-anchor="middle" fill="#F97316" font-family="system-ui" font-size="12" font-weight="500">WireGuard Overlay Network (10.50.0.0/16)</text>

  <!-- POP SA -->
  <g filter="url(#shadow)">
    <rect x="50" y="170" width="220" height="220" rx="12" fill="#1E293B" stroke="url(#saPopGrad)" stroke-width="2"/>
    <text x="160" y="200" text-anchor="middle" fill="#10B981" font-family="system-ui" font-size="14" font-weight="600">POP SA (Sao Paulo)</text>

    <!-- edgeProxy -->
    <rect x="70" y="215" width="180" height="55" rx="8" fill="url(#saPopGrad)"/>
    <text x="160" y="240" text-anchor="middle" fill="white" font-family="system-ui" font-size="12" font-weight="600">edgeProxy</text>
    <text x="160" y="258" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-family="monospace" font-size="9">0.0.0.0:8080</text>

    <!-- Backends -->
    <rect x="70" y="280" width="85" height="45" rx="6" fill="#0F172A" stroke="#334155"/>
    <text x="112" y="302" text-anchor="middle" fill="#10B981" font-family="monospace" font-size="9">sa-node-1</text>
    <text x="112" y="316" text-anchor="middle" fill="#64748B" font-family="monospace" font-size="8">10.50.1.1</text>

    <rect x="165" y="280" width="85" height="45" rx="6" fill="#0F172A" stroke="#334155"/>
    <text x="207" y="302" text-anchor="middle" fill="#10B981" font-family="monospace" font-size="9">sa-node-2</text>
    <text x="207" y="316" text-anchor="middle" fill="#64748B" font-family="monospace" font-size="8">10.50.1.2</text>

    <!-- routing.db -->
    <rect x="70" y="335" width="180" height="35" rx="6" fill="#F97316" opacity="0.8"/>
    <text x="160" y="357" text-anchor="middle" fill="white" font-family="system-ui" font-size="10" font-weight="500">routing.db (Corrosion)</text>
  </g>

  <!-- POP US -->
  <g filter="url(#shadow)">
    <rect x="340" y="90" width="220" height="220" rx="12" fill="#1E293B" stroke="url(#usPopGrad)" stroke-width="2"/>
    <text x="450" y="120" text-anchor="middle" fill="#3B82F6" font-family="system-ui" font-size="14" font-weight="600">POP US (Virginia)</text>

    <!-- edgeProxy -->
    <rect x="360" y="135" width="180" height="55" rx="8" fill="url(#usPopGrad)"/>
    <text x="450" y="160" text-anchor="middle" fill="white" font-family="system-ui" font-size="12" font-weight="600">edgeProxy</text>
    <text x="450" y="178" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-family="monospace" font-size="9">0.0.0.0:8081</text>

    <!-- Backends -->
    <rect x="360" y="200" width="85" height="45" rx="6" fill="#0F172A" stroke="#334155"/>
    <text x="402" y="222" text-anchor="middle" fill="#3B82F6" font-family="monospace" font-size="9">us-node-1</text>
    <text x="402" y="236" text-anchor="middle" fill="#64748B" font-family="monospace" font-size="8">10.50.2.1</text>

    <rect x="455" y="200" width="85" height="45" rx="6" fill="#0F172A" stroke="#334155"/>
    <text x="497" y="222" text-anchor="middle" fill="#3B82F6" font-family="monospace" font-size="9">us-node-2</text>
    <text x="497" y="236" text-anchor="middle" fill="#64748B" font-family="monospace" font-size="8">10.50.2.2</text>

    <!-- routing.db -->
    <rect x="360" y="255" width="180" height="35" rx="6" fill="#F97316" opacity="0.8"/>
    <text x="450" y="277" text-anchor="middle" fill="white" font-family="system-ui" font-size="10" font-weight="500">routing.db (Corrosion)</text>
  </g>

  <!-- POP EU -->
  <g filter="url(#shadow)">
    <rect x="630" y="170" width="220" height="220" rx="12" fill="#1E293B" stroke="url(#euPopGrad)" stroke-width="2"/>
    <text x="740" y="200" text-anchor="middle" fill="#8B5CF6" font-family="system-ui" font-size="14" font-weight="600">POP EU (Frankfurt)</text>

    <!-- edgeProxy -->
    <rect x="650" y="215" width="180" height="55" rx="8" fill="url(#euPopGrad)"/>
    <text x="740" y="240" text-anchor="middle" fill="white" font-family="system-ui" font-size="12" font-weight="600">edgeProxy</text>
    <text x="740" y="258" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-family="monospace" font-size="9">0.0.0.0:8082</text>

    <!-- Backends -->
    <rect x="650" y="280" width="85" height="45" rx="6" fill="#0F172A" stroke="#334155"/>
    <text x="692" y="302" text-anchor="middle" fill="#8B5CF6" font-family="monospace" font-size="9">eu-node-1</text>
    <text x="692" y="316" text-anchor="middle" fill="#64748B" font-family="monospace" font-size="8">10.50.3.1</text>

    <rect x="745" y="280" width="85" height="45" rx="6" fill="#0F172A" stroke="#334155"/>
    <text x="787" y="302" text-anchor="middle" fill="#8B5CF6" font-family="monospace" font-size="9">eu-node-2</text>
    <text x="787" y="316" text-anchor="middle" fill="#64748B" font-family="monospace" font-size="8">10.50.3.2</text>

    <!-- routing.db -->
    <rect x="650" y="335" width="180" height="35" rx="6" fill="#F97316" opacity="0.8"/>
    <text x="740" y="357" text-anchor="middle" fill="white" font-family="system-ui" font-size="10" font-weight="500">routing.db (Corrosion)</text>
  </g>

  <!-- WireGuard mesh lines -->
  <line x1="270" y1="280" x2="340" y2="220" stroke="#F97316" stroke-width="2" stroke-dasharray="4,2" opacity="0.6"/>
  <line x1="560" y1="220" x2="630" y2="280" stroke="#F97316" stroke-width="2" stroke-dasharray="4,2" opacity="0.6"/>
  <line x1="270" y1="350" x2="630" y2="350" stroke="#F97316" stroke-width="2" stroke-dasharray="4,2" opacity="0.6"/>

  <!-- Clients -->
  <g filter="url(#shadow)">
    <rect x="50" y="60" width="90" height="60" rx="8" fill="#EC4899"/>
    <text x="95" y="85" text-anchor="middle" fill="white" font-family="system-ui" font-size="10" font-weight="500">Client BR</text>
    <text x="95" y="102" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-family="monospace" font-size="8">189.x.x.x</text>
  </g>

  <g filter="url(#shadow)">
    <rect x="400" y="50" width="90" height="35" rx="6" fill="#EC4899"/>
    <text x="445" y="72" text-anchor="middle" fill="white" font-family="system-ui" font-size="10" font-weight="500">Client US</text>
  </g>

  <g filter="url(#shadow)">
    <rect x="760" y="60" width="90" height="60" rx="8" fill="#EC4899"/>
    <text x="805" y="85" text-anchor="middle" fill="white" font-family="system-ui" font-size="10" font-weight="500">Client DE</text>
    <text x="805" y="102" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-family="monospace" font-size="8">85.x.x.x</text>
  </g>

  <!-- Client arrows -->
  <path d="M 95 125 L 130 165" stroke="#EC4899" stroke-width="2" fill="none"/>
  <polygon points="135,170 125,158 138,163" fill="#EC4899"/>

  <path d="M 445 90 L 445 135" stroke="#EC4899" stroke-width="2" fill="none"/>
  <polygon points="445,145 438,133 452,133" fill="#EC4899"/>

  <path d="M 805 125 L 770 165" stroke="#EC4899" stroke-width="2" fill="none"/>
  <polygon points="765,170 762,157 775,162" fill="#EC4899"/>

  <!-- Legend -->
  <rect x="50" y="500" width="800" height="40" rx="6" fill="#1E293B" stroke="#334155"/>
  <circle cx="100" cy="520" r="8" fill="#10B981"/>
  <text x="115" y="524" fill="#94A3B8" font-family="system-ui" font-size="10">SA Region</text>

  <circle cx="220" cy="520" r="8" fill="#3B82F6"/>
  <text x="235" y="524" fill="#94A3B8" font-family="system-ui" font-size="10">US Region</text>

  <circle cx="340" cy="520" r="8" fill="#8B5CF6"/>
  <text x="355" y="524" fill="#94A3B8" font-family="system-ui" font-size="10">EU Region</text>

  <line x1="450" y1="515" x2="480" y2="515" stroke="#F97316" stroke-width="2" stroke-dasharray="4,2"/>
  <text x="490" y="519" fill="#94A3B8" font-family="system-ui" font-size="10">WireGuard Mesh</text>

  <rect x="600" y="513" width="14" height="14" rx="2" fill="#F97316" opacity="0.8"/>
  <text x="620" y="524" fill="#94A3B8" font-family="system-ui" font-size="10">Corrosion (SQLite Sync)</text>

  <circle cx="780" cy="520" r="8" fill="#EC4899"/>
  <text x="795" y="524" fill="#94A3B8" font-family="system-ui" font-size="10">Client</text>
</svg>
