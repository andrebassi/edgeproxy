<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 320">
  <defs>
    <linearGradient id="boxGrad3" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#4a5568"/>
      <stop offset="100%" style="stop-color:#2d3748"/>
    </linearGradient>
  </defs>

  <!-- Background -->
  <rect width="700" height="320" fill="#1a202c"/>

  <!-- Title -->
  <text x="350" y="30" fill="#a0aec0" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle">Registration Flow</text>

  <!-- Backend box -->
  <rect x="50" y="60" width="140" height="60" rx="6" fill="url(#boxGrad3)" stroke="#667eea" stroke-width="2"/>
  <text x="120" y="88" fill="white" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle">Backend</text>
  <text x="120" y="105" fill="#a0aec0" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">(startup)</text>

  <!-- Agent box -->
  <rect x="280" y="60" width="140" height="60" rx="6" fill="url(#boxGrad3)" stroke="#48bb78" stroke-width="2"/>
  <text x="350" y="88" fill="white" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle">Agent</text>
  <text x="350" y="105" fill="#a0aec0" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">(sidecar)</text>

  <!-- Corrosion box -->
  <rect x="510" y="60" width="140" height="60" rx="6" fill="url(#boxGrad3)" stroke="#ed8936" stroke-width="2"/>
  <text x="580" y="88" fill="white" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle">Corrosion</text>
  <text x="580" y="105" fill="#a0aec0" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">(control)</text>

  <!-- Arrows between boxes -->
  <line x1="190" y1="90" x2="280" y2="90" stroke="#667eea" stroke-width="2"/>
  <polygon points="280,90 270,85 270,95" fill="#667eea"/>

  <line x1="420" y1="90" x2="510" y2="90" stroke="#48bb78" stroke-width="2"/>
  <polygon points="510,90 500,85 500,95" fill="#48bb78"/>

  <!-- Vertical lines -->
  <line x1="120" y1="120" x2="120" y2="300" stroke="#4a5568" stroke-width="1" stroke-dasharray="4"/>
  <line x1="350" y1="120" x2="350" y2="300" stroke="#4a5568" stroke-width="1" stroke-dasharray="4"/>
  <line x1="580" y1="120" x2="580" y2="300" stroke="#4a5568" stroke-width="1" stroke-dasharray="4"/>

  <!-- Step 1: Start -->
  <line x1="120" y1="150" x2="350" y2="150" stroke="#667eea" stroke-width="2"/>
  <polygon points="350,150 340,145 340,155" fill="#667eea"/>
  <text x="235" y="143" fill="#667eea" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">1. Start</text>

  <!-- Step 2: Register -->
  <line x1="350" y1="180" x2="580" y2="180" stroke="#48bb78" stroke-width="2"/>
  <polygon points="580,180 570,175 570,185" fill="#48bb78"/>
  <text x="465" y="173" fill="#48bb78" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">2. Register</text>

  <!-- Step 3: Heartbeat -->
  <line x1="350" y1="210" x2="580" y2="210" stroke="#48bb78" stroke-width="2"/>
  <polygon points="580,210 570,205 570,215" fill="#48bb78"/>
  <text x="465" y="203" fill="#48bb78" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">3. Heartbeat</text>
  <text x="465" y="225" fill="#a0aec0" font-family="Arial, sans-serif" font-size="9" text-anchor="middle">(every 10s)</text>

  <!-- Step 4: Shutdown -->
  <line x1="120" y1="255" x2="350" y2="255" stroke="#fc8181" stroke-width="2"/>
  <polygon points="350,255 340,250 340,260" fill="#fc8181"/>
  <text x="235" y="248" fill="#fc8181" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">4. Shutdown</text>

  <!-- Step 5: Deregister -->
  <line x1="350" y1="285" x2="580" y2="285" stroke="#fc8181" stroke-width="2"/>
  <polygon points="580,285 570,280 570,290" fill="#fc8181"/>
  <text x="465" y="278" fill="#fc8181" font-family="Arial, sans-serif" font-size="10" text-anchor="middle">5. Deregister</text>
</svg>
