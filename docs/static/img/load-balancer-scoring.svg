<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 500">
  <defs>
    <linearGradient id="saGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#10B981;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#059669;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="usGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3B82F6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1D4ED8;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="euGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#8B5CF6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#7C3AED;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="4" stdDeviation="6" flood-opacity="0.15"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="900" height="500" fill="#0f172a" rx="12"/>

  <!-- Title -->
  <text x="450" y="35" text-anchor="middle" fill="white" font-family="system-ui" font-size="20" font-weight="600">Load Balancer Scoring Example</text>

  <!-- Scenario Box -->
  <rect x="50" y="55" width="800" height="70" rx="8" fill="#1E293B" stroke="#334155"/>
  <text x="70" y="80" fill="white" font-family="system-ui" font-size="13" font-weight="500">Scenario: Client from Brazil connecting to POP SA</text>
  <text x="70" y="100" fill="#94A3B8" font-family="system-ui" font-size="11">Client IP: 189.103.x.x (BR) | Local POP: SA | GeoIP resolved region: sa</text>

  <!-- Backend Cards -->
  <!-- sa-node-1 -->
  <g filter="url(#shadow)">
    <rect x="50" y="145" width="190" height="160" rx="10" fill="url(#saGrad)"/>
    <text x="145" y="175" text-anchor="middle" fill="white" font-family="system-ui" font-size="14" font-weight="600">sa-node-1</text>
    <line x1="65" y1="190" x2="225" y2="190" stroke="rgba(255,255,255,0.2)" stroke-width="1"/>
    <text x="75" y="215" fill="rgba(255,255,255,0.9)" font-family="system-ui" font-size="11">region: sa</text>
    <text x="75" y="235" fill="rgba(255,255,255,0.9)" font-family="system-ui" font-size="11">weight: 2</text>
    <text x="75" y="255" fill="rgba(255,255,255,0.9)" font-family="system-ui" font-size="11">conns: 30</text>
    <text x="75" y="275" fill="rgba(255,255,255,0.9)" font-family="system-ui" font-size="11">soft_limit: 50</text>
    <rect x="60" y="285" width="170" height="14" rx="2" fill="rgba(0,0,0,0.3)"/>
    <rect x="60" y="285" width="102" height="14" rx="2" fill="rgba(255,255,255,0.3)"/>
    <text x="145" y="295" text-anchor="middle" fill="white" font-family="system-ui" font-size="8">60% capacity</text>
  </g>

  <!-- sa-node-2 -->
  <g filter="url(#shadow)">
    <rect x="260" y="145" width="190" height="160" rx="10" fill="url(#saGrad)"/>
    <text x="355" y="175" text-anchor="middle" fill="white" font-family="system-ui" font-size="14" font-weight="600">sa-node-2</text>
    <line x1="275" y1="190" x2="435" y2="190" stroke="rgba(255,255,255,0.2)" stroke-width="1"/>
    <text x="285" y="215" fill="rgba(255,255,255,0.9)" font-family="system-ui" font-size="11">region: sa</text>
    <text x="285" y="235" fill="rgba(255,255,255,0.9)" font-family="system-ui" font-size="11">weight: 1</text>
    <text x="285" y="255" fill="rgba(255,255,255,0.9)" font-family="system-ui" font-size="11">conns: 10</text>
    <text x="285" y="275" fill="rgba(255,255,255,0.9)" font-family="system-ui" font-size="11">soft_limit: 50</text>
    <rect x="270" y="285" width="170" height="14" rx="2" fill="rgba(0,0,0,0.3)"/>
    <rect x="270" y="285" width="34" height="14" rx="2" fill="rgba(255,255,255,0.3)"/>
    <text x="355" y="295" text-anchor="middle" fill="white" font-family="system-ui" font-size="8">20% capacity</text>
  </g>

  <!-- us-node-1 -->
  <g filter="url(#shadow)">
    <rect x="470" y="145" width="190" height="160" rx="10" fill="url(#usGrad)"/>
    <text x="565" y="175" text-anchor="middle" fill="white" font-family="system-ui" font-size="14" font-weight="600">us-node-1</text>
    <line x1="485" y1="190" x2="645" y2="190" stroke="rgba(255,255,255,0.2)" stroke-width="1"/>
    <text x="495" y="215" fill="rgba(255,255,255,0.9)" font-family="system-ui" font-size="11">region: us</text>
    <text x="495" y="235" fill="rgba(255,255,255,0.9)" font-family="system-ui" font-size="11">weight: 2</text>
    <text x="495" y="255" fill="rgba(255,255,255,0.9)" font-family="system-ui" font-size="11">conns: 0</text>
    <text x="495" y="275" fill="rgba(255,255,255,0.9)" font-family="system-ui" font-size="11">soft_limit: 50</text>
    <rect x="480" y="285" width="170" height="14" rx="2" fill="rgba(0,0,0,0.3)"/>
    <text x="565" y="295" text-anchor="middle" fill="white" font-family="system-ui" font-size="8">0% capacity</text>
  </g>

  <!-- eu-node-1 -->
  <g filter="url(#shadow)">
    <rect x="680" y="145" width="190" height="160" rx="10" fill="url(#euGrad)"/>
    <text x="775" y="175" text-anchor="middle" fill="white" font-family="system-ui" font-size="14" font-weight="600">eu-node-1</text>
    <line x1="695" y1="190" x2="855" y2="190" stroke="rgba(255,255,255,0.2)" stroke-width="1"/>
    <text x="705" y="215" fill="rgba(255,255,255,0.9)" font-family="system-ui" font-size="11">region: eu</text>
    <text x="705" y="235" fill="rgba(255,255,255,0.9)" font-family="system-ui" font-size="11">weight: 2</text>
    <text x="705" y="255" fill="rgba(255,255,255,0.9)" font-family="system-ui" font-size="11">conns: 0</text>
    <text x="705" y="275" fill="rgba(255,255,255,0.9)" font-family="system-ui" font-size="11">soft_limit: 50</text>
    <rect x="690" y="285" width="170" height="14" rx="2" fill="rgba(0,0,0,0.3)"/>
    <text x="775" y="295" text-anchor="middle" fill="white" font-family="system-ui" font-size="8">0% capacity</text>
  </g>

  <!-- Calculation Section -->
  <text x="50" y="340" fill="white" font-family="system-ui" font-size="14" font-weight="500">Score Calculation</text>

  <!-- sa-node-1 calculation -->
  <rect x="50" y="355" width="190" height="55" rx="6" fill="#0F172A" stroke="#334155"/>
  <text x="145" y="375" text-anchor="middle" fill="#10B981" font-family="monospace" font-size="10">region=0 (client match)</text>
  <text x="145" y="392" text-anchor="middle" fill="#94A3B8" font-family="monospace" font-size="10">0*100 + (0.6/2)</text>
  <text x="145" y="405" text-anchor="middle" fill="white" font-family="monospace" font-size="12" font-weight="600">= 0.30</text>

  <!-- sa-node-2 calculation -->
  <rect x="260" y="355" width="190" height="55" rx="6" fill="#0F172A" stroke="#22C55E" stroke-width="2"/>
  <text x="355" y="375" text-anchor="middle" fill="#10B981" font-family="monospace" font-size="10">region=0 (client match)</text>
  <text x="355" y="392" text-anchor="middle" fill="#94A3B8" font-family="monospace" font-size="10">0*100 + (0.2/1)</text>
  <text x="355" y="405" text-anchor="middle" fill="#22C55E" font-family="monospace" font-size="12" font-weight="600">= 0.20 WINNER</text>

  <!-- us-node-1 calculation -->
  <rect x="470" y="355" width="190" height="55" rx="6" fill="#0F172A" stroke="#334155"/>
  <text x="565" y="375" text-anchor="middle" fill="#EF4444" font-family="monospace" font-size="10">region=2 (fallback)</text>
  <text x="565" y="392" text-anchor="middle" fill="#94A3B8" font-family="monospace" font-size="10">2*100 + (0.0/2)</text>
  <text x="565" y="405" text-anchor="middle" fill="white" font-family="monospace" font-size="12" font-weight="600">= 200.00</text>

  <!-- eu-node-1 calculation -->
  <rect x="680" y="355" width="190" height="55" rx="6" fill="#0F172A" stroke="#334155"/>
  <text x="775" y="375" text-anchor="middle" fill="#EF4444" font-family="monospace" font-size="10">region=2 (fallback)</text>
  <text x="775" y="392" text-anchor="middle" fill="#94A3B8" font-family="monospace" font-size="10">2*100 + (0.0/2)</text>
  <text x="775" y="405" text-anchor="middle" fill="white" font-family="monospace" font-size="12" font-weight="600">= 200.00</text>

  <!-- Result Arrow -->
  <path d="M 355 415 L 355 455" stroke="#22C55E" stroke-width="3" fill="none"/>
  <polygon points="355,465 347,453 363,453" fill="#22C55E"/>

  <!-- Result Box -->
  <rect x="260" y="470" width="190" height="25" rx="6" fill="#22C55E"/>
  <text x="355" y="488" text-anchor="middle" fill="white" font-family="system-ui" font-size="12" font-weight="600">Selected: sa-node-2</text>

  <!-- Key -->
  <rect x="680" y="430" width="190" height="60" rx="6" fill="#1E293B" stroke="#334155"/>
  <text x="775" y="450" text-anchor="middle" fill="white" font-family="system-ui" font-size="11" font-weight="500">Lower Score = Better</text>
  <text x="775" y="470" text-anchor="middle" fill="#94A3B8" font-family="system-ui" font-size="10">Region priority &gt; Load</text>
  <text x="775" y="485" text-anchor="middle" fill="#94A3B8" font-family="system-ui" font-size="10">Weight reduces penalty</text>
</svg>
